FROM ghcr.io/digiimmi/php-7.4-cli:latest

RUN apt-get update \
&& apt-get upgrade -y \
&& apt-get install -y libzip-dev libpng-dev libevent-dev libssl-dev git wget curl nload \
&& docker-php-ext-install zip mysqli bcmath gd pcntl pdo_mysql sockets \
&& pecl install event redis \
&& docker-php-ext-enable event redis \
&& php -m \
&& php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');" \
&& php composer-setup.php --install-dir=/usr/local/bin --filename=composer \
&& php -r "unlink('composer-setup.php');" \
&& mkdir -p /usr/src/APP

WORKDIR /usr/src/APP
